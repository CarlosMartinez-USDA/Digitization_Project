<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Stylesheet documentation for: NAL-MARC21slimUtils.xsl</title>
      <link rel="stylesheet" href="docHtml.css" type="text/css" /><script type="text/javascript"><!--
        
        var parametersBoxes= new Array('prs_T_datafieldsS_NAL-MARC21slimUtils.xsl', 
				'prs_T_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'prs_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'prs_T_buildSpacesS_NAL-MARC21slimUtils.xsl', 
				'prs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl', 
				'prs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl', 
				'prs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl', 
				'prs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl', 
				'prs_T_url-encodeS_NAL-MARC21slimUtils.xsl', 
				'prs_F_stripPunctuationS_NAL-MARC21slimUtils.xsl', 
				'prs_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl', 
				'prs_F_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'prs_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl', 
				'prs_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'prs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl', 
				'prs_F_subjCatCodeS_NAL-MARC21slimUtils.xsl', 
				'prs_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl', 
				'prs_F_marcCountryS_NAL-MARC21slimUtils.xsl', 
				'prs_F_langCodeS_NAL-MARC21slimUtils.xsl', 
				'prs_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl', 
				'prs_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl', 
				'prs_F_capitalize-firstS_NAL-MARC21slimUtils.xsl', 
				'prs_F_sentence-caseS_NAL-MARC21slimUtils.xsl', 
				'prs_F_proper-caseS_NAL-MARC21slimUtils.xsl', 
				'prs_F_substring-before-matchS_NAL-MARC21slimUtils.xsl', 
				'prs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl', 
				'prs_F_authorityS_NAL-MARC21slimUtils.xsl', 
				'prs_F_isNumberS_NAL-MARC21slimUtils.xsl', 
				'prs_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl', 
				'prs_F_percentEncodeS_NAL-MARC21slimUtils.xsl', 
				'prs_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');

        
        var usedByBoxes= new Array('uB_T_buildSpacesS_NAL-MARC21slimUtils.xsl', 
				'uB_T_chopPunctuationS_NAL-MARC21slimUtils.xsl', 
				'uB_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl', 
				'uB_T_url-encodeS_NAL-MARC21slimUtils.xsl', 
				'uB_V_asciiS_NAL-MARC21slimUtils.xsl', 
				'uB_V_latin1S_NAL-MARC21slimUtils.xsl', 
				'uB_V_safeS_NAL-MARC21slimUtils.xsl', 
				'uB_V_hexS_NAL-MARC21slimUtils.xsl', 
				'uB_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl', 
				'uB_F_sentence-caseS_NAL-MARC21slimUtils.xsl', 
				'uB_F_substring-before-matchS_NAL-MARC21slimUtils.xsl', 
				'uB_F_authorityS_NAL-MARC21slimUtils.xsl');

        var docBoxes= new Array('dS_NAL-MARC21slimUtils.xsl', 
				'dS_T_datafieldsS_NAL-MARC21slimUtils.xsl', 
				'dS_T_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'dS_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'dS_T_buildSpacesS_NAL-MARC21slimUtils.xsl', 
				'dS_T_chopPunctuationS_NAL-MARC21slimUtils.xsl', 
				'dS_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl', 
				'dS_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl', 
				'dS_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl', 
				'dS_T_url-encodeS_NAL-MARC21slimUtils.xsl', 
				'dS_V_asciiS_NAL-MARC21slimUtils.xsl', 
				'dS_V_safeS_NAL-MARC21slimUtils.xsl', 
				'dS_F_stripPunctuationS_NAL-MARC21slimUtils.xsl', 
				'dS_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl', 
				'dS_F_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'dS_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl', 
				'dS_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'dS_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl', 
				'dS_F_subjCatCodeS_NAL-MARC21slimUtils.xsl', 
				'dS_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl', 
				'dS_F_marcCountryS_NAL-MARC21slimUtils.xsl', 
				'dS_F_langCodeS_NAL-MARC21slimUtils.xsl', 
				'dS_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl', 
				'dS_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl', 
				'dS_F_capitalize-firstS_NAL-MARC21slimUtils.xsl', 
				'dS_F_sentence-caseS_NAL-MARC21slimUtils.xsl', 
				'dS_F_proper-caseS_NAL-MARC21slimUtils.xsl', 
				'dS_F_substring-before-matchS_NAL-MARC21slimUtils.xsl', 
				'dS_F_nameIdentifierS_NAL-MARC21slimUtils.xsl', 
				'dS_F_authorityS_NAL-MARC21slimUtils.xsl', 
				'dS_F_isNumberS_NAL-MARC21slimUtils.xsl', 
				'dS_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl', 
				'dS_F_percentEncodeS_NAL-MARC21slimUtils.xsl', 
				'dS_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');

        var sourceBoxes= new Array('src_T_datafieldsS_NAL-MARC21slimUtils.xsl', 
				'src_T_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'src_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'src_T_buildSpacesS_NAL-MARC21slimUtils.xsl', 
				'src_T_chopPunctuationS_NAL-MARC21slimUtils.xsl', 
				'src_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl', 
				'src_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl', 
				'src_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl', 
				'src_T_url-encodeS_NAL-MARC21slimUtils.xsl', 
				'src_V_asciiS_NAL-MARC21slimUtils.xsl', 
				'src_V_latin1S_NAL-MARC21slimUtils.xsl', 
				'src_V_safeS_NAL-MARC21slimUtils.xsl', 
				'src_V_hexS_NAL-MARC21slimUtils.xsl', 
				'src_V_alphaS_NAL-MARC21slimUtils.xsl', 
				'src_F_stripPunctuationS_NAL-MARC21slimUtils.xsl', 
				'src_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl', 
				'src_F_subfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'src_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl', 
				'src_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl', 
				'src_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl', 
				'src_F_subjCatCodeS_NAL-MARC21slimUtils.xsl', 
				'src_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl', 
				'src_F_marcCountryS_NAL-MARC21slimUtils.xsl', 
				'src_F_langCodeS_NAL-MARC21slimUtils.xsl', 
				'src_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl', 
				'src_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl', 
				'src_F_capitalize-firstS_NAL-MARC21slimUtils.xsl', 
				'src_F_sentence-caseS_NAL-MARC21slimUtils.xsl', 
				'src_F_proper-caseS_NAL-MARC21slimUtils.xsl', 
				'src_F_substring-before-matchS_NAL-MARC21slimUtils.xsl', 
				'src_F_nameIdentifierS_NAL-MARC21slimUtils.xsl', 
				'src_F_authorityS_NAL-MARC21slimUtils.xsl', 
				'src_F_isNumberS_NAL-MARC21slimUtils.xsl', 
				'src_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl', 
				'src_F_percentEncodeS_NAL-MARC21slimUtils.xsl', 
				'src_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');

        
        
        var referencesBoxes= new Array('refs_T_buildSpacesS_NAL-MARC21slimUtils.xsl', 
				'refs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl', 
				'refs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl', 
				'refs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl', 
				'refs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl', 
				'refs_T_url-encodeS_NAL-MARC21slimUtils.xsl', 
				'refs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl', 
				'refs_F_proper-caseS_NAL-MARC21slimUtils.xsl', 
				'refs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl');

        
        
        
        
        var button_prefix = 'bt_';
        
        /**
        * Get all DIV elements with a specified class name.
        *
        * @param className The class name. 
        */
        function getElementsByClassName(className) {
            var results = [];
    
             if (document.getElementsByClassName == undefined) {
                var allElements = document.getElementsByTagName("div");
                var element;
                for (var i = 0; i < allElements.length; i++) {
                    var element = allElements[i];
                	var elementClass = element.className;
                	if (elementClass == className) { 
                		results.push(element);
                	}
                }
             } else {
                results = document.getElementsByClassName(className);
             }
    
            return results;
        }
            
        /**
        * Returns an element in the current HTML document.
        *
        * @param elementID Identifier of HTML element
        * @return               HTML element object
        */
        function getElementObject(elementID) {
            var elemObj = null;
            if (document.getElementById) {
                elemObj = document.getElementById(elementID);
            }
            return elemObj;
        }
        
        /**
        * Switches the state of a collapseable box, e.g.
        * if it's opened, it'll be closed, and vice versa.
        *
        * @param boxID Identifier of box
        */
        function switchState(boxID) {
            var boxObj = getElementObject(boxID);
            var buttonObj = getElementObject(button_prefix + boxID);
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else if (boxObj.style.display == "none") {
                // Box is closed, so open it
                openBox(boxObj, buttonObj);
            } else if (boxObj.style.display == "block") {
                // Box is opened, so close it
                closeBox(boxObj, buttonObj);
            }
        }
        
        /**
        * Opens a collapseable box.
        *
        * @param boxObj       Collapseable box
        * @param buttonObj Button controlling box
        */
        function openBox(boxObj, buttonObj) {
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else {
                // Change 'display' CSS property of box
                boxObj.style.display = "block";
                
                // Change text of button
                if (boxObj.style.display == "block") {
                    buttonObj.src = "img/btM.gif";
                }
            }
        }
        
        /**
        * Closes a collapseable box.
        *
        * @param boxObj       Collapseable box
        * @param buttonObj Button controlling box
        */
        function closeBox(boxObj, buttonObj) {
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else {
                // Change 'display' CSS property of box
                boxObj.style.display = "none";
                
                // Change text of button
                if (boxObj.style.display == "none") {
                    buttonObj.src = "img/btP.gif";
                }
            }
        }

       /**
        * Switch between the compact list representation and the clasic list representation.
        */
       function switchMode(checkBox) {
            if (checkBox == null) {
                // Checkbox not found
            } else if (checkBox.checked == 1) {
                // Compact mode
                var divs = getElementsByClassName('refItemBlock');
                for (var i = 0; i < divs.length; i ++) {
                    divs[i].style.display = "inline";
                    var children = divs[i].children;
                    var refItemSep = children[children.length - 1];
                    if (refItemSep.className == "refItemSep") {
                        children[children.length - 1].style.display = "inline";
                    }
                }
            } else {
                // Expanded mode
                var divs = getElementsByClassName('refItemBlock');
                for (var i = 0; i < divs.length; i ++) {
                    divs[i].style.display = "block";
                    var children = divs[i].children;
                    var refItemSep = children[children.length - 1];
                    if (refItemSep.className == "refItemSep") {
                        children[children.length - 1].style.display = "none";
                    }
                }
            }
        }

       function switchStateForAll(buttonObj, boxList) {
            if (buttonObj == null) {
                // button not found
            } else if (buttonObj.value == "+") {
                // Expand all
                expandAll(boxList);
                buttonObj.value = "-";
            } else if (buttonObj.value == "-") {
                // Collapse all
                collapseAll(boxList);
                buttonObj.value = "+";
            }
        }
        
        /**
        * Closes all boxes in a given list.
        *
        * @param boxList Array of box IDs
        */
        function collapseAll(boxList) {
            var idx;
            for (idx = 0; idx < boxList.length; idx++) {
                var boxObj = getElementObject(boxList[idx]);
                var buttonObj = getElementObject(button_prefix + boxList[idx]);
                closeBox(boxObj, buttonObj);
            }
        }
            
        /**
        * Open all boxes in a given list.
        *
        * @param boxList Array of box IDs
        */
        function expandAll(boxList) {
            var idx;
            for (idx = 0; idx < boxList.length; idx++) {
                var boxObj = getElementObject(boxList[idx]);
                var buttonObj = getElementObject(button_prefix + boxList[idx]);
                openBox(boxObj, buttonObj);
            }
        }
        
        /**
         * Update the message presented in the title of the html page.
         * - If the documentation was splited by namespace we present something like: "Documentation for namespace 'ns'"
         * - If the documentation was splited by location we present somehing like: "Documentation for 'Schema.xsd'"
         * - If no split we always present: "Documentation for 'MainSchema.xsd'"
         */
        function updPT(message) {
            top.document.title = "Stylesheet documentation for: " + message;
        }
        
          
                    
         /**
          * Finds an HTML element by its ID and makes it floatable over the normal content.
          *
          * @param x_displacement The difference in pixels to the right side of the window from 
          *           the left side of the element.
          * @param y_displacement The difference in pixels to the right side of the window from 
          *           the top of the element.          
          */
         function findAndFloat(id, x_displacement, y_displacement){

            var element = getElementObject(id);            
            
            window[id + "_obj"] = element;
            
            if(document.layers) {
               element.style = element;
            }
            
            element.current_y = y_displacement;      
            element.first_time = true;
         
            element.floatElement = function(){
               // It may be closed by an user action.
                
               // Target X and Y coordinates.
               var x, y;
               
               var myWidth = 0, myHeight = 0;
               if( typeof( window.innerWidth ) == 'number' ) {
                  //Non-IE
                  myWidth = window.innerWidth;
                  myHeight = window.innerHeight;
               } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myWidth = document.documentElement.clientWidth;
                  myHeight = document.documentElement.clientHeight;
               } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myWidth = document.body.clientWidth;
                  myHeight = document.body.clientHeight;
               }
               
               
               x = myWidth - x_displacement;
               
               var ns = (navigator.appName.indexOf("Netscape") != -1);               
               y = ns ? pageYOffset : document.documentElement && document.documentElement.scrollTop ? 
                  document.documentElement.scrollTop : document.body.scrollTop;               
               y = y + y_displacement;               
               
               // The current y is the current coordinate of the floating element.
               // This should be at the limit the y target coordinate.
               this.current_y += (y - this.current_y)/1.25;
               
               // Add the pixels constant after the values
               // and move the element.
               var px = document.layers ? "" : "px";
               this.style.left =  x + px;
               this.style.top =  this.current_y + px;
                              
               setTimeout(this.id + "_obj.floatElement()", 100);
            }
            
            element.floatElement();
            return element;
          }

         /**
          * Finds an HTML element by its ID and makes it floatable over the normal content.
          *
          * @param x_displacement The difference in pixels to the right side of the window from 
          *           the left side of the element.
          * @param y_displacement The difference in pixels to the right side of the window from 
          *           the top of the element.          
          */
         function selectTOCGroupBy(id){
         var selectIds = new Array('toc_group_by_location', 'toc_group_by_component_type', 'toc_group_by_namespace', 'toc_group_by_mode');
            // Make all the tabs invisible.
            for (i = 0; i < 4; i++){
               var tab = getElementObject(selectIds[i]);
               tab.style.display = 'none';
            }
            var selTab = getElementObject(id);
            selTab.style.display = 'block';            
         }
          

    
                    //--></script></head>
   <body>
      <div id="global_controls" class="globalControls" style="position:absolute;right:0;">
         <table class="rt">
            <tr>
               <td class="rt_cTL"></td>
               <td class="rt_lT"></td>
               <td class="rt_cTR"></td>
            </tr>
            <tr>
               <td class="rt_lL"></td>
               <td class="rt_cnt">
                  <h3>Mode:</h3>
                  <table>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchMode(this);" class="control" /></span><span class="globalControlName">Compact lists</span></td>
                     </tr>
                  </table>
                  <h3>Showing:</h3>
                  <table>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchStateForAll(this, docBoxes);" class="control" /></span><span class="globalControlName">Documentation
                              </span></td>
                     </tr>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchStateForAll(this, parametersBoxes);" class="control" /></span><span class="globalControlName">Parameters </span></td>
                     </tr>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchStateForAll(this, usedByBoxes);" class="control" /></span><span class="globalControlName">Used by </span></td>
                     </tr>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchStateForAll(this, referencesBoxes);" class="control" /></span><span class="globalControlName">References </span></td>
                     </tr>
                     <tr>
                        <td><span><input type="checkbox" value="-" checked="checked" onclick="switchStateForAll(this, sourceBoxes);" class="control" /></span><span class="globalControlName">Source </span></td>
                     </tr>
                  </table>
                  <div align="right"><span><input type="button" onclick="getElementObject('global_controls').style.display = 'none';" value="Close" /></span></div>
               </td>
               <td class="rt_lR"></td>
            </tr>
            <tr>
               <td class="rt_cBL"></td>
               <td class="rt_lB"></td>
               <td class="rt_cBR"></td>
            </tr>
         </table>
      </div><a id="NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Main stylesheet
         <span class="qname">NAL-MARC21slimUtils.xsl</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div id="Institution-id-LC">
                                 <h3>Description</h3>
                                 
                                 <p><b>XSLT 1.0 templates</b></p>
                                 
                                 <p><b>Created on:</b>August, 19, 2004</p>
                                 
                                 <p><b>Author:</b>Nate Trail</p>
                                 
                                 <p><b>XSLT 2.0 functions</b></p>
                                 
                                 <p><b>Modified on:</b>December, 14, 2007</p>
                                 
                                 <p><b>Author:</b>Nate Trail</p>
                                 
                                 <p><b>Modified on:</b>August 8, 2008</p>
                                 
                                 <h3>Description</h3>
                                 
                                 <p><b>NAL XSLT functions</b></p>
                                 
                                 <p><b>Created on:</b>October 27, 2022</p>
                                 
                                 <p><b>Author</b>Carlos Martinez III</p>
                                 </div>
                              <hr />
                              <div id="nal-local-functions">
                                 <h3>Description</h3>
                                 
                                 <p>created on:October 27, 2022</p>
                                 
                                 <p><b>Creator:</b>Carlos Martinez III</p>
                                 
                                 <p><b>email:</b>carlos.martinez2@usda.gov</p>
                                 
                                 <p><b>modified on:</b>January 14, 2023</p>
                                 
                                 <p>
                                    <b>NAL Custom XSLT Functions:</b>
                                    </p>
                                 
                                 <p>
                                    
                                    <ul>
                                       
                                       <li class="doc">
                                          <i>1.<a href="NAL-MARC21slimUtils0.html#F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" target="_self">f:add-namespace-prefix</a>f:add-namespace-prefix</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>2.<a href="NAL-MARC21slimUtils0.html#F_subjCatCodeS_NAL-MARC21slimUtils.xsl" target="_self">f:subjCatCode</a>f:subjCatCode</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>3.<a href=".html#" target="_self">info:marcCountry</a>
                                             Revised f:decodeMARCCountry to reference https://www.loc.gov/standards/codelists/countries.xml</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>4.<a href="NAL-MARC21slimUtils0.html#F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" target="_self">f:f:isoTwo2Lang</a>f:isoTwo2Lang</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>5.<a href="NAL-MARC21slimUtils0.html#F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" target="_self">f:isoOne2Two</a>f:isoOne2Two</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>6.<a href="NAL-MARC21slimUtils0.html#F_capitalize-firstS_NAL-MARC21slimUtils.xsl" target="_self">f:capitalize-first</a>f:capitalize-first</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>7.<a href="NAL-MARC21slimUtils0.html#F_sentence-caseS_NAL-MARC21slimUtils.xsl" target="_self">f:sentence-case</a>f:sentence-case</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>8.<a href="NAL-MARC21slimUtils0.html#F_proper-caseS_NAL-MARC21slimUtils.xsl" target="_self">f:f:proper-case</a>f:f:proper-case</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>9.<a href="NAL-MARC21slimUtils0.html#F_substring-before-matchS_NAL-MARC21slimUtils.xsl" target="_self">f:substring-before-match</a>f:substring-before-match</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>10.<a href=".html#" target="_self">f:nameIdAttr</a>f:nameIdentifier</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>11.<a href="NAL-MARC21slimUtils0.html#F_isNumberS_NAL-MARC21slimUtils.xsl" target="_self">f:isNumber</a>f:isNumber</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>12.<a href=".html#" target="_self">f:modsTotalPages</a>f:modsTotalPages</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>13.<a href="NAL-MARC21slimUtils0.html#F_percentEncodeS_NAL-MARC21slimUtils.xsl" target="_self">f:percentEncode</a>f:percentEncode</i>
                                          </li>
                                       
                                       <li class="doc">
                                          <i>14.<a href="NAL-MARC21slimUtils0.html#F_punctuation-trimS_NAL-MARC21slimUtils.xsl" target="_self">f:punctuation-trim</a>f:punctuation-trim</i>
                                          </li>
                                       </ul>
                                    </p>
                                 </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Stylesheet version</td>
                        <td>3.0</td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_datafieldsS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">datafields</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_datafieldsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_datafieldsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_datafieldsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>datafield
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>tag</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>ind1</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>ind2</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>subfields</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> builds datafield template</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_datafieldsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_datafieldsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_datafieldsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">ind1</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">ind2</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">subfields</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">tag</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_datafieldsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_datafieldsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_datafieldsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"datafields"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"tag"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"ind1"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"ind2"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"subfields"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- prefixed --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"marc:datafield"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:element</span><span class="tAN"> name=</span><span class="tAV">"marc:datafield"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"tag"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$tag"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"ind1"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$ind1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"ind2"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$ind2"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"$subfields"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:element&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- non-prefixed--&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:element</span><span class="tAN"> name=</span><span class="tAV">"datafield"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"tag"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$tag"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"ind1"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$ind1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"ind2"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$ind2"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"$subfields"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:element&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_subfieldSelectS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">subfieldSelect</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>codes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>delimiter</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> builds subfield select </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">codes</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">delimiter</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">abcdefghijklmnopqrstuvwxyz01</span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"delimiter"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- prefixed --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"marc:subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"marc:subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($codes, @code)"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"text()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$delimiter"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- non-prefixed --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($codes, @code)"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"text()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$delimiter"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - string-length($delimiter))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">specialSubfieldSelect</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>anyCodes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>axis</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>beforeCodes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>afterCodes</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">afterCodes</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">anyCodes</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">axis</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">beforeCodes</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"marc:subfield|subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($anyCodes, @code) or (contains($beforeCodes, @code) and following-sibling::marc:subfield[@code = $axis]) or (contains($afterCodes, @code) and preceding-sibling::marc:subfield[@code = $axis])"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"text()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_buildSpacesS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">buildSpaces</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_buildSpacesS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_buildSpacesS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_buildSpacesS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>spaces</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>char</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_T_buildSpacesS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_T_buildSpacesS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_T_buildSpacesS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_buildSpacesS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">buildSpaces</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_buildSpacesS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_buildSpacesS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_buildSpacesS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_buildSpacesS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">buildSpaces</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_buildSpacesS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_buildSpacesS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_buildSpacesS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">char</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">spaces</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_buildSpacesS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_buildSpacesS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_buildSpacesS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"buildSpaces"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"spaces"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"char"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$spaces &gt; 0"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$char"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"buildSpaces"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"spaces"</span><span class="tAN"> select=</span><span class="tAV">"$spaces - 1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"char"</span><span class="tAN"> select=</span><span class="tAV">"$char"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_chopPunctuationS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">chopPunctuation</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_chopPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>chopString</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>punctuation</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_T_chopPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Templates</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuation</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuationBack</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuationStrings</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuation</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">chopString</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">punctuation</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_chopPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_chopPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">.:,;/ </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"length"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"string-length($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$length = 0"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($punctuation, substring($chopString, $length, 1))"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"substring($chopString, 1, $length - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tAN"> select=</span><span class="tAV">"$punctuation"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"not($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">chopPunctuationStrings</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>chopStrings</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>punctuation</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuation</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">chopStrings</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">punctuation</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_chopPunctuationStringsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationStrings"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"chopStrings"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">.:,;/ </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$chopStrings"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"length"</span><span class="tAN"> select=</span><span class="tAV">"string-length($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$length = 0"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($punctuation, substring($chopString, $length, 1))"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"substring($chopString, 1, $length - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tAN"> select=</span><span class="tAV">"$punctuation"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"not($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">chopPunctuationFront</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>chopString</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuationFront</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuationFront</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">chopString</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationFront"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"length"</span><span class="tAN"> select=</span><span class="tAV">"string-length($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$length = 0"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains('.:,;/[ ', substring($chopString, 1, 1))"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationFront"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"substring($chopString, 2, $length - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"not($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">chopPunctuationBack</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>chopString</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>punctuation</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_chopPunctuationS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">chopPunctuation</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">chopString</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">punctuation</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_chopPunctuationBackS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationBack"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">.:,;/] </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:param&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"length"</span><span class="tAN"> select=</span><span class="tAV">"string-length($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$length = 0"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($punctuation, substring($chopString, $length, 1))"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"substring($chopString, 1, $length - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tAN"> select=</span><span class="tAV">"$punctuation"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"not($chopString)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$chopString"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="T_url-encodeS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">url-encode</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_url-encodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_url-encodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_url-encodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3> nate added 12/14/2007 for lccn.loc.gov: url encode ampersand, etc. 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>str</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_T_url-encodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_T_url-encodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_T_url-encodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_url-encodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_url-encodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_url-encodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Variables</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#V_asciiS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')">ascii</a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#V_hexS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')">hex</a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#V_latin1S_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')">latin1</a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#V_safeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')">safe</a></div>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_T_url-encodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_T_url-encodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_T_url-encodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">str</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_url-encodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_url-encodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_url-encodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"url-encode"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$str"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"first-char"</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($safe, $first-char)"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$first-char"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"codepoint"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($ascii, $first-char)"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"string-length(substring-before($ascii, $first-char)) + 32"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($latin1, $first-char)"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"string-length(substring-before($latin1, $first-char)) + 160"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tC">&lt;!-- was 160 --&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:message</span><span class="tAN"> terminate=</span><span class="tAV">"no"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">Warning: string contains a character that is out of range! Substituting "?".</span><span class="tXSLEl">&lt;/xsl:message&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">63</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"hex-digit1"</span><span class="tAN"> select=</span><span class="tAV">"substring($hex, floor($codepoint div 16) + 1, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"hex-digit2"</span><span class="tAN"> select=</span><span class="tAV">"substring($hex, $codepoint mod 16 + 1, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- &lt;xsl:value-of select="concat('%',$hex-digit2)"/&gt; --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat('%', $hex-digit1, $hex-digit2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"string-length($str) &gt; 1"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"url-encode"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="V_asciiS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Variable
         <span class="qname">ascii</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_V_asciiS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_V_asciiS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_V_asciiS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <pre> 08/08/08: tmee added corrected chopPunctuation templates for 260c </pre>
                                 <pre> 08/19/04: ntra added "marc:" prefix to datafield element </pre>
                                 <pre> 12/14/07: ntra added url encoding template </pre>
                                 <pre> 02/16/23: cmartinez updated datafield, subfieldSelec and specialSubfieldSelect templates to conditonally process both prefixed and non-prefixed elements. </pre>
                                 <pre> 05/22/23: cmartinez added alpha to use in functions (e.g., using translate to remove letters from page #'s) </pre>
                                 <pre> url encoding </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_V_asciiS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_V_asciiS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_V_asciiS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_V_asciiS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_V_asciiS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_V_asciiS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"ascii"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> !"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="V_latin1S_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Variable
         <span class="qname">latin1</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_V_latin1S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_V_latin1S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_V_latin1S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_V_latin1S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_V_latin1S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_V_latin1S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"latin1"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="V_safeS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Variable
         <span class="qname">safe</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_V_safeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_V_safeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_V_safeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <pre> Characters that usually don't need to be escaped </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_V_safeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_V_safeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_V_safeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_V_safeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_V_safeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_V_safeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"safe"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">!'()*-.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="V_hexS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Variable
         <span class="qname">hex</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_V_hexS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_V_hexS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_V_hexS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#T_url-encodeS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span class="nRf">url-encode</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_V_hexS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_V_hexS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_V_hexS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"hex"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">0123456789ABCDEF</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="V_alphaS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Variable
         <span class="qname">alpha</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_V_alphaS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_V_alphaS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_V_alphaS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"alpha"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-|. '~</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_stripPunctuationS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">local:stripPunctuation (<span class="fParams">str</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_stripPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>  
                                 			
                                 <p>Strips punctuation from the last character of a field.</p>
                                 			
                                 <p>To extend add any additional punctuation to the punctuation variable</p>
                                 			
                                 <p>$str: string to be analyzed</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>str</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> XSLT 2.0 functions </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://www.local.gov/namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_stripPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">str</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_stripPunctuationS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_stripPunctuationS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"local:stripPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">.:,;/</span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- isolates end of string --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"strEnd"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, (string-length($str)))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- isolates last three characters in string tests for initials --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"initialTest"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"lastChars"</span><span class="tAN"> select=</span><span class="tAV">"substring($str, (string-length($str)) - 2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([.][A-Z][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([ ][A-Z][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([.][.][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">false</span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($punctuation, $strEnd)"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- if ends with initials or ellipse then leave, otherwise remove ending punctuation --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$initialTest = 'true'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- if ends with multiple punctiation --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches(substring($str, (string-length($str)) - 3), '([.:,;/][ ][.:,;/])')"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 3)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="stripPunctuationA_2S_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:stripPunctuation (<span class="fParams">str, pcodes</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3> 
                                 
                                 <p>Strips punctuation from the last character of a field, this version accepts two parameters:</p>
                                 
                                 <p>$str: string to be striped</p>
                                 
                                 <p>$pcodes: optional punctuation to override the defualt, if empty uses defualts</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>str</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>pcodes</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">pcodes</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">str</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_stripPunctuationA_2S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:stripPunctuation"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"pcodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$pcodes = ''"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">.:,;/</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$pcodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"strEnd"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, (string-length($str)))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"initialTest"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"lastChars"</span><span class="tAN"> select=</span><span class="tAV">"substring($str, (string-length($str)) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([.][A-Z][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([ ][A-Z][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($lastChars, '^([.][.][.])')"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">true</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">false</span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($punctuation, $strEnd)"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$initialTest = 'true'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$str"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_subfieldSelectS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:subfieldSelect (<span class="fParams">datafield, codes</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3> 
                                 
                                 <p>Concats specified subfields in order they appear in marc record</p>
                                 
                                 <p>Two prameters</p>
                                 
                                 <p>$datafield: marc:datafield node to use for processing</p>
                                 
                                 <p>$codes: list of subfield codes, no spaces</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>datafield</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>codes</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">codes</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">datafield</td>
                                    <td>No namespace</td>
                                    <td>node()</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_subfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_subfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:subfieldSelect"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"datafield"</span><span class="tAN"> as=</span><span class="tAV">"node()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- Selects and prints out datafield --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$datafield/child::*[contains($codes, @code)]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat(., ' ')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="subfieldSelectA_3S_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">local:subfieldSelect (<span class="fParams">datafield, codes, delimiter</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p>Concats specified subfields in order they appear in marc record with specified delimiter.
                                    </p>
                                 
                                 <p>Three parameters $datafield: marc:datafield node to use for processing</p>
                                 
                                 <p>$codes: list of subfield codes, no spaces $delimiter: delimiter to use when concating</p>
                                 
                                 <p>subfields, if empty a space is used</p>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>codes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>delimiter</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>datafield</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://www.local.gov/namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">codes</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">datafield</td>
                                    <td>No namespace</td>
                                    <td>node()</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">delimiter</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_subfieldSelectA_3S_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"local:subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"datafield"</span><span class="tAN"> as=</span><span class="tAV">"node()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"delimiter"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"delimStr"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$delimiter = ''"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"' '"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$delimiter"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- Selects and prints out datafield --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"str"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$datafield/child::*[contains($codes, @code)]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat(., $delimStr)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($str, 1, string-length($str) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">local:specialSubfieldSelect (<span class="fParams">datafield, anyCodes, axis, beforeCodes, afterCodes</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3> 
                                 
                                 <p>Concats specified subfields based on siblings</p>
                                 
                                 <p>$anyCode: the subfield you want to select on</p>
                                 
                                 <p>$axis: the that beforeCodes and afterCodes are computed</p>
                                 
                                 <p>$beforeCodes: subfields that occure before the axis</p>
                                 
                                 <p>$afterCodes: subfields that occure after the axis</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>datafield</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>anyCodes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>axis</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>beforeCodes</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>afterCodes</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://www.local.gov/namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">afterCodes</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">anyCodes</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">axis</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">beforeCodes</td>
                                    <td>No namespace</td>
                                    <td></td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">datafield</td>
                                    <td>No namespace</td>
                                    <td>node()</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_specialSubfieldSelectS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"local:specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"datafield"</span><span class="tAN"> as=</span><span class="tAV">"node()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"subfieldStr"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$datafield/marc:subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"                     contains($anyCodes, @code)                     or (contains($beforeCodes, @code) and following-sibling::marc:subfield[@code = $axis])                     or (contains($afterCodes, @code) and preceding-sibling::marc:subfield[@code = $axis])"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"text()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($subfieldStr, 1, string-length($subfieldStr) - 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:add-namespace-prefix (<span class="fParams">elements, add-namespace, add-prefix</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div id="f:add-namespace-prefix">
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:add-namespace-prefix</p>
                                 
                                 <p><b>Usage: </b>f:add-namespace-prefix([nodes],[namespace to add],[added namespace prefix])</p>
                                 
                                 <p><b>Purpose: </b>Calculate the total page count if the first and last pages are present and are integers</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>elements</b></td>
                                       <td>the nodes to change the element prefix</td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>add-namespace</b></td>
                                       <td>declare no namespace</td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>add-prefix</b></td>
                                       <td>adds the namespace prefix</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre>NAL Custom Functions by Carlos Martinez III</pre>
                                 <pre>f:add-namespace-prefix</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>node()*</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>f:add-namespace-prefix (</span><span class="fParams">elements, add-namespace, add-prefix</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>add-namespace-prefix (</span><span class="fParams">elements, add-namespace, add-prefix</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">add-namespace</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">add-prefix</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">elements</td>
                                    <td>No namespace</td>
                                    <td>node()*</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_add-namespace-prefixS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:add-namespace-prefix"</span><span class="tAN"> as=</span><span class="tAV">"node()*"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"elements"</span><span class="tAN"> as=</span><span class="tAV">"node()*"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"add-namespace"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"add-prefix"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$elements"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"element"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$element instance of element()"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:element</span><span class="tAN"> name=</span><span class="tAV">"{concat($add-prefix,                         if ($add-prefix = '')                         then ''                         else ':',                         local-name($element))}"</span><span class="tAN"> namespace=</span><span class="tAV">"{$add-namespace}"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"                                 ($element/@*,                                 f:add-namespace-prefix($element/node(),                                 $add-namespace, $add-prefix))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:element&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$element instance of document-node()"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:document</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"                                 f:add-namespace-prefix(                                 $element/node(), $add-namespace, $add-prefix)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:document&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$element"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_subjCatCodeS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:subjCatCode (<span class="fParams">subjCode</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_subjCatCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div id="f:subjCatCode">
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:subjCatCode</p>
                                 
                                 <p><b>Usage: </b>f:subjCatCode(xpath)</p>
                                 
                                 <p><b>Purpose: </b>The function maps NAL subject category codes (i.e., 072
                                    ind2=0, subfield a) to it's respective term found in Appendix D: NAL Subject
                                    Categrory Codes</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>subjCode</b></td>
                                       <td>Convert subject category codes (MARC 072$a) into NAL Subject Categories.</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:subjCatCode </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_subjCatCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">subjCode</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_subjCatCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_subjCatCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:subjCatCode"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"subjCode"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"subject_name"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('commons/xml/nalSubjCat.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$subjCode = ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$nodes/nalsubcat:agricola/nalsubcat:subject[nalsubcat:code = $subjCode]/nalsubcat:category"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$subject_name"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:decodeMARCCountry (<span class="fParams">marccode</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div id="f:decodeMARCCountry">
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:decodeMARCCountry</p>
                                 
                                 <p><b>Usage: </b>f:decodeMARCCountry($marcCountryCode)</p>
                                 
                                 <p><b>Purpose:</b>Use an XML lookup file to match MARC Country Code</p>
                                 
                                 <p><b>Returns:</b> the proper state or country name from the
                                    controlfield[@tag='008']</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>marccode</b></td>
                                       <td>marcCountry code variable passes the two or three letter valued to
                                          the $marcCode parameter</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre>f:decodeMARCCountry</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">marccode</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_decodeMARCCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:decodeMARCCountry"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"marccode"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"MARCcode"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('commons/xml/marcCountry.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marccode = ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$nodes/marccountry:marcCountry/marccountry:value[marccountry:code = $marccode]/marccountry:country"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$MARCcode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_marcCountryS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">info:marcCountry (<span class="fParams">controlField008-15-17</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_marcCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_marcCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_marcCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div id="info:marcCountry">
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>info:MARCCountry</p>
                                 
                                 <p><b>Usage: </b>info:decodeMARCCountry($marcCountryCode)</p>
                                 
                                 <p><b>Purpose:</b>Uses LC's countries.xml as lookup file to match MARC Country Code</p>
                                 
                                 <p><b>Returns:</b> the proper state or country name from the controlfield[@tag='008']</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>controlField008-15-17</b></td>
                                       <td>marcCountry code variable passes the two or three letter valued to the $marcCode parameter</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> info:marcCountry </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>info:lc/xmlns/codelist-v1</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_marcCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_marcCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_marcCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">controlField008-15-17</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_marcCountryS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_marcCountryS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_marcCountryS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"info:marcCountry"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> xmlns=</span><span class="tAV">"info:lc/xmlns/codelist-v1"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"controlField008-15-17"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- control field 008, position 15-17--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"country_name"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('http://www.loc.gov/standards/codelists/countries.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-15-17 = ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- if empty, do not process --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$nodes/info:codelist/info:countries/info:country[info:code = $controlField008-15-17]/info:name"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$country_name"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_langCodeS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">info:langCode (<span class="fParams">langParam</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_langCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_langCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_langCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>info:langCode()</p>
                                 
                                 <p><b>Usage: </b>info:langCode(iso 639-2b code)</p>
                                 
                                 <p><b>Purpose: </b>Convert ISO 639-2b three-letter codes into the corresponding
                                    languages.</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>langParam</b></td>
                                       <td>three-letter language code to match against</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> info:langCode </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>info:lc/xmlns/codelist-v1</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_langCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_langCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_langCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">langParam</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_langCodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_langCodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_langCodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"info:langCode"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> xmlns=</span><span class="tAV">"info:lc/xmlns/codelist-v1"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"langParam"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"langVar"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('https://www.loc.gov/standards/codelists/languages.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$langParam = ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$nodes/info:codelist/info:languages/info:language[info:code = $langParam]/info:name"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$langVar"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_isoTwo2LangS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:isoTwo2Lang (<span class="fParams">iso_639-2</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:isoTwo2Lang</p>
                                 
                                 <p><b>Usage: </b>f:isoTwo2Lang(iso 639-2b code)</p>
                                 
                                 <p><b>Purpose: </b>Convert ISO 639-2b three-letter codes into the corresponding
                                    languages.</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>iso_639-2</b></td>
                                       <td>three-letter language code to match against</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:isoTwo2Lang </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">iso_639-2</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:isoTwo2Lang"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"iso_639-2"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"iso639-2b"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('commons/xml/iso639conversion.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$iso_639-2 = ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$nodes/isolang:iso_languages/isolang:iso_language[isolang:iso_639-2 = $iso_639-2]/isolang:language"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$iso639-2b"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_isoOne2TwoS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:isoOne2Two (<span class="fParams">iso_639-1</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:isoOne2Two</p>
                                 
                                 <p><b>Usage: </b>f:isoOne2Two(iso 639-1 code)</p>
                                 
                                 <p><b>Purpose: </b>Convert ISO 639-1 two-letter codes into ISO 639-2b
                                    three-letter codes.</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>iso_639-1</b></td>
                                       <td>two-letter language code to match against</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre>f:isoOne2Two</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">iso_639-1</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_isoOne2TwoS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:isoOne2Two"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"iso_639-1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"nodes"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"document('commons/xml/iso639conversion.xml')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"$nodes/isolang:isolanguages/isolang:isolanguage[isolang:iso_639-1 = $iso_639-1]/isolang:iso_639-2"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_capitalize-firstS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:capitalize-first (<span class="fParams">arg</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_capitalize-firstS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:capitalize-first</p>
                                 
                                 <p><b>Usage: </b>f:capitalize-first(XPath)</p>
                                 
                                 <p><b>Purpose: </b>The f:capitalize-first function capitalizes the first
                                    character of $arg. If the first character is not a lowercase letter, $arg is left
                                    unchanged. It capitalizes only the first character of the entire string, not the
                                    first letter of every word<i>f:capitalize-first</i></p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>arg</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre>f:capitalize-first</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string?</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_capitalize-firstS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">arg</td>
                                    <td>No namespace</td>
                                    <td>xs:string?</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_capitalize-firstS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_capitalize-firstS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:capitalize-first"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"arg"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"                 concat(upper-case(substring($arg, 1, 1)),                 substring($arg, 2))                 "</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_sentence-caseS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:sentence-case (<span class="fParams">arg</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_sentence-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_sentence-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_sentence-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:sentence-case</p>
                                 
                                 <p><b>Usage: </b>f:sentence-case(XPath)</p>
                                 
                                 <p><b>Purpose:</b>The f:sentence-case function treats a string like two
                                    parts; the first character of $arg is capitalized, the rest of the string is
                                    lowercase. (e.g. "STRING THEORY" ---&gt; "String theory"). Thus, even if the second
                                    letter of $arg is not a lowercase letter, the rest of the string is still lowercase.
                                    </p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>arg</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre>f:sentence-case</pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string?</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_F_sentence-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_F_sentence-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_F_sentence-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_proper-caseS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>f:proper-case (</span><span class="fParams">arg</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_sentence-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_sentence-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_sentence-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">arg</td>
                                    <td>No namespace</td>
                                    <td>xs:string?</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_sentence-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_sentence-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_sentence-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:sentence-case"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"arg"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"                 concat(upper-case(substring($arg, 1, 1)),                 lower-case(substring($arg, 2)))                 "</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_proper-caseS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:proper-case (<span class="fParams">arg</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_proper-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_proper-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_proper-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:proper-case</p>
                                 
                                 <p><b>Usage: </b>f:proper-case(XPath)</p>
                                 
                                 <p><b>Purpose: </b>The f:proper-case function performs a "choose when" test
                                    first determining if a string contains two substrings, when it does, it capitalizes
                                    the first character of each substring. when it does not, it capitalizes the first
                                    character of the substring, and the rest of the string is lowercase, making use of
                                    <i>f:proper-case</i>function in both instances</p>
                                 
                                 <p>
                                    <b>Parameters</b>
                                    </p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>arg</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:proper-case </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_F_proper-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_F_proper-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_F_proper-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Functions</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_sentence-caseS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>sentence-case (</span><span class="fParams">arg</span><span>)</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_substring-before-matchS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>substring-before-match (</span><span class="fParams">arg, regex</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_proper-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_proper-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_proper-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">arg</td>
                                    <td>No namespace</td>
                                    <td>xs:string?</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_proper-caseS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_proper-caseS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_proper-caseS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:proper-case"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"arg"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"otherChars"</span><span class="tAN"> as=</span><span class="tAV">"item()*"</span><span class="tAN"> select=</span><span class="tAV">"f:substring-before-match($arg,'\-|[A-Z].[A-Z].|\s')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"white-space"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> select=</span><span class="tAV">"(' ')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"substring-1a"</span><span class="tAN"> select=</span><span class="tAV">"substring-before($arg, $white-space)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"substring-1b"</span><span class="tAN"> select=</span><span class="tAV">"substring-after($arg, $white-space)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"substring-2a"</span><span class="tAN"> select=</span><span class="tAV">"substring-before($arg, $white-space)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"substring-2b"</span><span class="tAN"> select=</span><span class="tAV">"substring-after($arg, $white-space)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"                 if (contains($arg, $otherChars))                 then concat(f:sentence-case($substring-1a), ($otherChars), (f:sentence-case($substring-1b)))                 else if (contains($arg, $white-space))                 then concat(f:sentence-case($substring-2a), ($white-space), (f:sentence-case($substring-2b)))                 else f:sentence-case($arg)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_substring-before-matchS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:substring-before-match (<span class="fParams">arg, regex</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_substring-before-matchS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>arg</b></td>
                                       <td></td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>regex</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:substring-before-match </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_F_substring-before-matchS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_proper-caseS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>f:proper-case (</span><span class="fParams">arg</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_substring-before-matchS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">arg</td>
                                    <td>No namespace</td>
                                    <td>xs:string?</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">regex</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_substring-before-matchS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_substring-before-matchS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:substring-before-match"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"arg"</span><span class="tAN"> as=</span><span class="tAV">"xs:string?"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"regex"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"tokenize($arg, $regex)[1]"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_nameIdentifierS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:nameIdentifier (<span class="fParams">uri</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_nameIdentifierS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:typeIdentifier</p>
                                 
                                 <p><b>Usage: </b>f:typeIdentifier(XPath)</p>
                                 
                                 <p><b>Purpose: </b>The f:typeIdentifier xpath is passed to the $uri param.
                                    The sequunce select uses the fn:matches($uri, $regex) tests the $arg. If $arg matches
                                    the $regex, then
                                    fn:replace($uri, $regex, $flag),</p>
                                 
                                 <p><b>Returns: </b> Removes the first and last substrings, leaving the org
                                    name.</p>
                                 
                                 <p>
                                    <b>Parameters</b>
                                    </p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>uri</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> nal:nameIdentifier </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_authorityS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>authority (</span><span class="fParams">authority</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">uri</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_nameIdentifierS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_nameIdentifierS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:nameIdentifier"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"uri"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"id"</span><span class="tAN"> select=</span><span class="tAV">"replace($uri, '(^https?)://(www)?(\w+)((\.\w+)(\.\w+)?(\.\w+)?)/?(\S+)/?(\?uri=)?(.*)', '$3$4')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"             if (matches($uri, '^https?://(www)?[id|agclass|lod|entities]+\.[a-z]+\.[a-z]+(\.[a-z]+)?.*'))              then f:authority($id)             else if ((contains($uri, 'orcid') or contains($uri, 'viaf') or  contains($uri, 'isni') or  matches($uri, '[a-z]+')) = true())             then substring-before($id,'.')             else $uri"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_authorityS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:authority (<span class="fParams">authority</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_authorityS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_authorityS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_authorityS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>authority</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:string</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_F_authorityS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_F_authorityS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_F_authorityS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Function</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slimUtils0.html#F_nameIdentifierS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('NAL-MARC21slimUtils.xsl')"><span>f:nameIdentifier (</span><span class="fParams">uri</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_authorityS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_authorityS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_authorityS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">authority</td>
                                    <td>No namespace</td>
                                    <td>xs:string</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_authorityS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_authorityS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_authorityS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:authority"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"if (contains($authority, 'loc'))             then 'lcnaf'             else if (contains($authority,'nlm'))             then 'mesh'             else ''"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_isNumberS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:isNumber (<span class="fParams">value</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_isNumberS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_isNumberS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_isNumberS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:isNumber</p>
                                 
                                 <p><b>Usage: </b>f:isNumber(xPath)</p>
                                 
                                 <p><b>Purpose: </b>The f:isNumber funcion tests and rounds parameters</p>
                                 
                                 <p><b>Returns: </b>True or False</p>
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>value</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:isNumber </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">Type</td>
                        <td>xs:boolean</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_isNumberS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_isNumberS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_isNumberS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                       <th>Type</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">value</td>
                                    <td>No namespace</td>
                                    <td>xs:anyAtomicType?</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_isNumberS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_isNumberS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_isNumberS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:isNumber"</span><span class="tAN"> as=</span><span class="tAV">"xs:boolean"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"value"</span><span class="tAN"> as=</span><span class="tAV">"xs:anyAtomicType?"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"string(abs(number($value))) != 'NaN'"</span><span class="tXSLEl">/&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_modsTotalPgsS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:modsTotalPgs (<span class="fParams">fpage, lpage</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:modsTotalPages</p>
                                 
                                 <p><b>Usage: </b>f:modsTotalPages([xpath/value for first page], [xpath/value for last page])</p>
                                 
                                 <p><b>Purpose: </b>Calculate the total page count if the first and last pages are present and are integers</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>fpage</b></td>
                                       <td>value or XPath for the first page</td>
                                    </tr>
                                    <tr>
                                       <td class="paramName"><b>lpage</b></td>
                                       <td>value or XPath for the last page</td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:modsTotalPages </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">fpage</td>
                                    <td>No namespace</td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">lpage</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_modsTotalPgsS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:modsTotalPgs"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"fpage"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"lpage"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"(string(number($fpage)) != 'NaN' and string(number($lpage)) != 'NaN')"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;total</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"number($lpage) - number($fpage) + 1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/total&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_percentEncodeS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:percentEncode (<span class="fParams">uris</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_percentEncodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_percentEncodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_percentEncodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:percentEncode</p>
                                 
                                 <p><b>Usage: </b>f:percentEncode($uris parameter])</p>
                                 
                                 <p><b>Purpose: </b>When the $uris parameter contains brackets, they are percent encoded to avoid invalid
                                    uri errors.</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>uris</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                              <hr />
                              <div>
                                 <h3>Description</h3>
                                 <pre> f:percentEncode </pre>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_percentEncodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_percentEncodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_percentEncodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">uris</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_percentEncodeS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_percentEncodeS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_percentEncodeS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:percentEncode"</span><span class="tAN"> xmlns:f=</span><span class="tAV">"http://functions"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"uris"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$uris"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"uri"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"sub1"</span><span class="tAN"> select=</span><span class="tAV">"replace($uri, '\[','%5B')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"sub2"</span><span class="tAN"> select=</span><span class="tAV">"replace($sub1, '\]','%5D')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"if (contains($uri, '[') or (contains($uri, ']')))             then ($sub2)              else $uri"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table><a id="F_punctuation-trimS_NAL-MARC21slimUtils.xsl"></a><div class="cmpT">Function
         <span class="qname">f:punctuation-trim (<span class="fParams">punctuated</span>)</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <div>
                                 <h3>Description</h3>
                                 
                                 <p><b>Function: </b>f:punctuation-trim</p>
                                 
                                 <p><b>Usage: </b>f:punctation-trim($punctuated)</p>
                                 
                                 <p><b>Purpose: </b>When the parameter contains brackets or other puntuation it is removed.</p>
                                 
                                 <table>
                                    <tr>
                                       <h4>Parameters</h4>
                                       <td class="paramName"><b>punctuated</b></td>
                                       <td></td>
                                    </tr>
                                 </table>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>http://functions</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Parameters</div>
                           <div class="flR"><input id="bt_prs_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('prs_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="prs_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="attsT">
                                 <thead>
                                    <tr>
                                       <th>QName</th>
                                       <th>Namespace</th>
                                    </tr>
                                 </thead>
                                 <tr>
                                    <td class="fCol">punctuated</td>
                                    <td>No namespace</td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_F_punctuation-trimS_NAL-MARC21slimUtils.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_F_punctuation-trimS_NAL-MARC21slimUtils.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:function</span><span class="tAN"> name=</span><span class="tAV">"f:punctuation-trim"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:param</span><span class="tAN"> name=</span><span class="tAV">"punctuated"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"punctuation_removed"</span><span class="tAN"> select=</span><span class="tAV">"translate($punctuated, '[]:;', '')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"$punctuated"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:sequence</span><span class="tAN"> select=</span><span class="tAV">"if ($punctuated = '')                                   then ($punctuated)                                   else if(matches($punctuated,'(^.*)?[\[\]:;](.*$)?'))                                   then (replace($punctuated, '(^.*)?[\[\]:;](.*$)?', '$1'))                                   else $punctuation_removed"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:function&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table>
      <div class="footer">
         <hr />
         <div align="center">Stylesheet documentation generated by <a href="http://www.oxygenxml.com" target="_parent"><span class="oXygenLogo"><span class="redX">&lt;</span>o<span class="redX">X</span>ygen<span class="redX">/&gt;</span></span></a><sup>®</sup> XML Editor.</div>
      </div><script type="text/javascript"><!--
                    // The namespace is the selected option in the TOC combo.
                    
                    // The corresponding div is already visible conf. to its style attr.                     
                    
                            var selectToc = getElementObject('selectTOC');
                            if(selectToc != null){
                            // It can be null when having chunking, the combo of the TOC is in another frame.
                            selectToc.selectedIndex = 0;
                            }
                        
                    
                    // Floats the toolbar.
                    var globalControls = getElementObject("global_controls"); 
                    
                    if(globalControls != null){
                    var browser=navigator.appName;
                    var version = parseFloat(navigator.appVersion.split('MSIE')[1]);
                    
                    var IE6 = false;
                    if ((browser=="Microsoft Internet Explorer") && (version < 7)){
                    IE6 = true;
                    }
                    
                    //alert (IE6 + " |V| " + version);
                    
                    if(IE6){
                    // On IE 6 the 'fixed' property is not supported. We must use javascript. 
                    globalControls.style.position='absolute';                         
                    // The global controls will do not exist in the TOC frame, when chunking.
                    findAndFloat("global_controls", 225, 30);    
                    } else {
                    globalControls.style.position='fixed';                     	
                    }
                    
                    globalControls.style.right='0';                       
                    }
                //--></script></body>
</html>